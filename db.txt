-- Tabela de tipos de personagem
CREATE TABLE character_types (
  id SERIAL PRIMARY KEY,
  name VARCHAR(50) NOT NULL,
  bg_image VARCHAR(100),
  base_hp INTEGER NOT NULL DEFAULT 0,
  base_attack INTEGER NOT NULL DEFAULT 0,
  base_defense INTEGER NOT NULL DEFAULT 0,
  base_critical INTEGER NOT NULL DEFAULT 0,
  base_speed DECIMAL(3,2) NOT NULL DEFAULT 1.0,
  hp_per_level INTEGER NOT NULL DEFAULT 0,
  attack_per_level INTEGER NOT NULL DEFAULT 0,
  defense_per_level INTEGER NOT NULL DEFAULT 0,
  critical_per_level INTEGER NOT NULL DEFAULT 0,
  speed_per_level DECIMAL(3,2) NOT NULL DEFAULT 0.0,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Inserir dados dos tipos de personagem
INSERT INTO character_types (id, name, bg_image, base_hp, base_attack, base_defense, base_critical, base_speed, hp_per_level, attack_per_level, defense_per_level, critical_per_level, speed_per_level) VALUES
(1, 'Assassin', 'speed.png', 700, 60, 120, 20, 1.2, 25, 3, 8, 2, 0.02),
(2, 'Warrior', 'critical.png', 900, 75, 80, 35, 1.0, 35, 4, 6, 3, 0.01),
(3, 'Tank', 'reflect.png', 1100, 50, 280, 15, 1.0, 45, 2, 12, 1, 0.00);

ALTER TABLE profiles 
ADD COLUMN IF NOT EXISTS character_name VARCHAR(20) UNIQUE CHECK (char_length(trim(character_name)) > 0),
ADD COLUMN IF NOT EXISTS character_type INTEGER DEFAULT 1 CHECK (character_type IN (1, 2, 3)),
ADD COLUMN IF NOT EXISTS level INTEGER DEFAULT 1 CHECK (level >= 1),
ADD COLUMN IF NOT EXISTS ranked_points INTEGER DEFAULT 0 CHECK (ranked_points >= 0),
ADD COLUMN IF NOT EXISTS victories INTEGER DEFAULT 0 CHECK (victories >= 0),
ADD COLUMN IF NOT EXISTS defeats INTEGER DEFAULT 0 CHECK (defeats >= 0),
